!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";function n(e,t,r,n){var o=e[t];e[t]=r(o),n&&n.push([e,t,o])}function o(e){for(var t=[].slice.call(e.attributes).filter(function(e){return R.test(e.name)}).map(function(e){return[e.name.substr(5).replace(/-(.)/g,function(e,t){return t.toUpperCase()}),e.value]}),r={},n=0,o=t;n<o.length;n++){var s=o[n],a=s[0],i=s[1];r[a]=i}return{tag:e.tagName,class:""!==e.className?e.className.split(" ").filter(Boolean):null,id:e.id||null,data:r}}function s(e){for(var t,r=[],n=" > ".length,o=0,s=0;e&&o++<D&&!("html"===(t=a(e))||o>1&&s+r.length*n+t.length>=H);)r.push(t),s+=t.length,e=e.parentNode;return r.reverse().join(" > ")}function a(e){var t,r,n,o,s,a=[];if(!e||!e.tagName)return"";if(a.push(e.tagName.toLowerCase()),e.id&&a.push("#"+e.id),(t=e.className)&&"string"==typeof t)for(r=t.split(/\s+/),s=0;s<r.length;s++)a.push("."+r[s]);var i=["type","name","title","alt"];for(s=0;s<i.length;s++)n=i[s],(o=e.getAttribute(n))&&a.push("["+n+'="'+o+'"]');return a.join("")}function i(e,t){return N.hasOwnProperty.call(e,t)}function u(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}function l(e){return"string"==typeof e}function c(e){return null===e}function p(e){return void 0===e}function d(e){return"object"==typeof e}function f(e){return e instanceof Error}function h(e){return c(e)||p(e)}function m(e){return"function"==typeof e&&e.call&&e.apply}function g(e){return e instanceof Array&&e.push&&e.pop&&e.length}function v(e){return T.hasJSON?JSON.parse(JSON.stringify(e)):e}function y(e){var t=new Date(e-288e5),r=_(t,!0,"-").replace(" ","T");return r+="Z"}function _(e,t,r){var n=e.getFullYear()+r;return e.getMonth()+1<10?n+="0"+(e.getMonth()+1)+r:n=n+(e.getMonth()+1)+r,e.getDate()<10?n+="0"+e.getDate():n+=e.getDate(),t?(n+=" ",e.getHours()<10?n+="0"+e.getHours()+":":n+=e.getHours()+":",e.getMinutes()<10?n+="0"+e.getMinutes()+":":n+=e.getMinutes()+":",e.getSeconds()<10?n+="0"+e.getSeconds():n+=e.getSeconds(),n):n}function x(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),r=document.cookie.match(t);return r?unescape(r[2]):null}function w(e,t){document.cookie=e+"="+t+";"}function b(){var e=window.navigator.userAgent.toLowerCase();if(e.indexOf("firefox")>=0){var t=e.match(/firefox\/([\d.]+)/)[1];return{type:"Firefox",version:t}}if(e.indexOf("chrome")>=0){var t=e.match(/chrome\/([\d.]+)/)[1];return{type:"Chrome",version:t}}if(e.indexOf("opera")>=0){var t=e.match(/opera.([\d.]+)/)[1];return{type:"Opera",version:t}}if(e.indexOf("safari")>=0){var t=e.match(/version\/([\d.]+)/)[1];return{type:"Safari",version:t}}if(window.ActiveXObject||"ActiveXObject"in window){return{type:"IE",version:/(msie\s|trident.*rv:)([\w.]+)/.exec(e)[2]}}return{type:"",version:""}}function q(){if(document.currentScript)return document.currentScript;for(var e,t=document.getElementsByTagName("script"),r=0,n=void 0,o=t.length;r<o;r++){n=t[r];if((n.src||"").match(".*pre-dem-web-v.*.js")){e=n;break}}return e}function A(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)})}function E(){try{return localStorage.setItem("supported","1"),localStorage.removeItem("supported"),!0}catch(e){return!1}}function S(e){var t=Number(e);return!isNaN(t)}function j(e){return null===e||""===e||void 0===e}function C(e){var t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:function(){for(var e,r={},n=t.search.replace(/^\?/,"").split("&"),o=n.length,s=0;s<o;s++)n[s]&&(-1===n[s].indexOf("=")?r[escape(n[s])]=escape(n[s]):(e=n[s].split("="),r[escape(e[0])]=escape(e[1])));return r}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:t.pathname.replace(/^\//,"").split("/")}}function O(e){var t="",r="",n="",o="",s="",a="",i="";if(j(e))return{domain:t,path:r,path1:n,path2:o,path3:s,path4:a,query:i};var u=C(e);if("file"===u.protocol)return{domain:t,path:r,path1:n,path2:o,path3:s,path4:a,query:i};var l=u.segments;t=u.host,r="/"===u.path?"":u.path,l&&l.length>=1&&(n=l[0]),l&&l.length>=2&&(o=l[1]),l&&l.length>=3&&(s=l[2]),l&&l.length>=4&&(a=l.slice(3).join("/"));var c=u.params;return i=JSON.stringify(c),{domain:t,path:r,path1:n,path2:o,path3:s,path4:a,query:i}}Object.defineProperty(t,"__esModule",{value:!0});var T=r(1);t.fill=n;var R=/^data-/;t.serializeDOMElement=o;var D=5,H=80;t.htmlTreeAsString=s,t.htmlElementAsString=a;var N=Object.prototype;t.hasKey=i,t.merge=u,t.isString=l,t.isNull=c,t.isUndefined=p,t.isObject=d,t.isError=f,t.isNil=h,t.isFunction=m,t.isArray=g,t.clone=v,t.timestampToUTCStr=y,t.convertDateToDateStr=_,t.getCookier=x,t.setCookier=w,t.getBrowserInfo=b,t.getCurrentScript=q,t.generateUUID=A,t.localStorageIsSupported=E,t.stringIsNumber=S,t.isEmpty=j,t.parseURL=C,t.getDomainAndPathInfoFromUrl=O},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t._window=n.isUndefined(window)?n.isUndefined(e)?n.isUndefined(self)?{}:self:e:window,t._document=t._window.document,t._navigator=t._window.navigator,t.hasJSON=!(!n.isObject(JSON)||n.isNil(JSON.stringify)),t.hasDocument=!n.isUndefined(t._document),t.hasNavigator=!n.isUndefined(t._navigator)}).call(t,r(5))},function(e,t,r){e.exports=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),o=r(0);!function(e){function t(){this.setTag=function(e){u.setTag(e)},this.sendEvent=function(e,t){return u.sendEvents([{eventName:e,eventData:t}])},this.sendEvents=function(e){return u.sendEvents(e)},this.setAppVersion=function(e){u.setAppVersion(e)}}e.predem=new t}(window);var s=24,a=8,i=function(){function e(){var e=o.getCurrentScript();e||console.error("没有获取pre-dem-web script!");var t=e.getAttribute("data-app-key");if(t.length!=s)return void console.error("appKey error");var r=e.getAttribute("data-domain");if(0==r.length)return void console.error("domain can not be null");var i=e.getAttribute("data-tag"),u=t.substring(0,a);n.default.setTag(i),n.default.init(u,r)}return e.prototype.setTag=function(e){n.default.setTag(e)},e.prototype.setAppVersion=function(e){n.default.setVersion(e)},e.prototype.sendEvents=function(e){if(!(e instanceof Array))return void console.log("Custom data need type Array");if(0===e.length)return void console.error("Custom data can not be empty");var t=e[0];return"undefine"===t.eventName||"undefine"===t.eventData?void console.error("Custom data must have eventName and eventData"):n.default.sendEventData(e)},e}(),u=new i;e.exports=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(6),s=r(0),a=r(8),i=a.version,u=function(){function e(){this.appId="",this.domain="",this.tag="",this.appVersion="1.0.0";var e="";e=s.localStorageIsSupported()?window.localStorage.predemUuid:s.getCookier(e),void 0!==e&&null!==e&&e.length>0?this.uuid=e:(e=s.generateUUID(),s.localStorageIsSupported()?window.localStorage.predemUuid=e:s.setCookier("predemUuid",e),this.uuid=e)}return e.prototype.init=function(e,t){this.appId=e,this.domain=t},e.prototype.setTag=function(e){this.tag=e},e.prototype.setVersion=function(e){this.appVersion=e},e.prototype.sendEventData=function(e){var t=this,r=this.domain+"/v2/"+this.appId+"/custom-events",n="";return e.map(function(e){var r=JSON.stringify(e.eventData),o=t.initCustomEvent(t.tag,e.eventName,r);n+=JSON.stringify(o)+"\n"}),this.request(r,"POST","text/plain",n)},e.prototype.request=function(e,t,r,s){return n._window._origin_fetch?n._window._origin_fetch(e,{method:t,headers:{"Content-Type":r},body:s}):o({url:e,method:t,headers:{"Content-Type":r},body:s})},e.prototype.getRequestFun=function(e,t,r){this.request(e,"POST","application/json",r)},e.prototype.initCustomEvent=function(e,t,r){return{time:Date.now(),type:"custom",name:t,app_version:this.appVersion,sdk_version:i,sdk_id:this.uuid,tag:e,content:r}},e}();t.WebData=u;var l=new u;t.default=l},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t,r){void 0!==module&&module.exports?module.exports=r():(__WEBPACK_AMD_DEFINE_FACTORY__=r,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,0,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,r){return function(){return e._aborted?r(e.request):e._timedOut?r(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):r(e.request)))}}function setHeaders(e,t){var r,n=t.headers||{};n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var o="undefined"!=typeof FormData&&t.data instanceof FormData;t.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||o||(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&"setRequestHeader"in e&&e.setRequestHeader(r,n[r])}function setCredentials(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,r,n){var o=uniqid++,s=e.jsonpCallback||"callback",a=e.jsonpCallbackName||reqwest.getcallbackPrefix(o),i=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),u=n.match(i),l=doc.createElement("script"),c=0,p=-1!==navigator.userAgent.indexOf("MSIE 10.0");return u?"?"===u[3]?n=n.replace(i,"$1="+a):a=u[3]:n=urlappend(n,s+"="+a),context[a]=generalCallback,l.type="text/javascript",l.src=n,l.async=!0,void 0===l.onreadystatechange||p||(l.htmlFor=l.id="_reqwest_"+o),l.onload=l.onreadystatechange=function(){if(l[readyState]&&"complete"!==l[readyState]&&"loaded"!==l[readyState]||c)return!1;l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),t(lastValue),lastValue=void 0,head.removeChild(l),c=1},head.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null,r({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(l),c=1}}}function getRequest(e,t){var r,n=this.o,o=(n.method||"GET").toUpperCase(),s="string"==typeof n?n:n.url,a=!1!==n.processData&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,i=!1;return"jsonp"!=n.type&&"GET"!=o||!a||(s=urlappend(s,a),a=null),"jsonp"==n.type?handleJsonp(n,e,t,s):(r=n.xhr&&n.xhr(n)||xhr(n),r.open(o,s,!1!==n.async),setHeaders(r,n),setCredentials(r,n),context[xDomainRequest]&&r instanceof context[xDomainRequest]?(r.onload=e,r.onerror=t,r.onprogress=function(){},i=!0):r.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(r),i?setTimeout(function(){r.send(a)},200):r.send(a),r)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(null!==e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(e){return error(resp,"Could not parse JSON in response",e)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,r){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=r,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,r);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var r,n,o,s,a=e.name,i=e.tagName.toLowerCase(),u=function(e){e&&!e.disabled&&t(a,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&a)switch(i){case"input":/reset|button|image|file/i.test(e.type)||(r=/checkbox/i.test(e.type),n=/radio/i.test(e.type),o=e.value,(!(r||n)||e.checked)&&t(a,normalize(r&&""===o?"on":o)));break;case"textarea":t(a,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())u(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(s=0;e.length&&s<e.length;s++)e.options[s].selected&&u(e.options[s])}}function eachFormElement(){var e,t,r=this;for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,r),function(e,t){var n,o,s;for(n=0;n<t.length;n++)for(s=e[byTag](t[n]),o=0;o<s.length;o++)serial(s[o],r)}(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,r){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(r)):e[t]=r},arguments),e}function buildParams(e,t,r,n){var o,s,a,i=/\[\]$/;if(isArray(t))for(s=0;t&&s<t.length;s++)a=t[s],r||i.test(e)?n(e,a):buildParams(e+"["+("object"==typeof a?s:"")+"]",a,r,n);else if(t&&"[object Object]"===t.toString())for(o in t)buildParams(e+"["+o+"]",t[o],r,n);else n(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=__webpack_require__(7)}catch(e){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(!0===e.crossOrigin){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,r){e.push({name:t,value:r})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,r=Array.prototype.slice.call(arguments,0);return e=r.pop(),e&&e.nodeType&&r.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,r)},reqwest.toQueryString=function(e,t){var r,n,o=t||!1,s=[],a=encodeURIComponent,i=function(e,t){t="function"==typeof t?t():null==t?"":t,s[s.length]=a(e)+"="+a(t)};if(isArray(e))for(n=0;e&&n<e.length;n++)i(e[n].name,e[n].value);else for(r in e)e.hasOwnProperty(r)&&buildParams(r,e[r],o,i);return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},function(e,t){},function(e,t){e.exports={name:"pre-dem-web-custom",version:"1.0.0",license:"MIT",main:"dist/pre-dem-web-custom.js",scripts:{clean:"rimraf build",check:"tslint -c ./tslint.json './src/**/*.ts*'",dev:"NODE_ENV=development && node --max_old_space_size=8000 node_modules/webpack-dev-server/bin/webpack-dev-server.js --config webpack.config.js --inline --progress --colors  --content-base --profile --display-modules build",build:"npm run clean && webpack --config webpack.config.js --profile --display-modules --progress --colors"},devDependencies:{"@types/node":"^8.0.24","awesome-typescript-loader":"^3.2.3",rimraf:"^2.5.3","source-map-loader":"^0.2.1",typescript:"^2.4.2",ava:"^0.20.0",webpack:"^3.5.5"},keywords:["dem"],dependencies:{reqwest:"^2.0.5"}}}])});